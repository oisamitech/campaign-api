// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model Campaign {
  id        BigInt   @id @default(autoincrement())
  name      String   @db.VarChar(255)
  startDate DateTime
  endDate   DateTime
  isDefault Boolean  @default(false)
  status    String   @db.VarChar(50) @default("ACTIVE") // ACTIVE, INACTIVE, PAUSED
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  deletedAt DateTime?

  rules Rule[]

  @@map("campaigns")
}

model Rule {
  id            BigInt @id @default(autoincrement())
  campaignId    BigInt // Chave estrangeira para Campaign
  minLives      Int
  maxLives      Int
  plans         Json   // Array de números
  paymentMethod Json   // Array de métodos de pagamento
  accommodation Json   // Array de tipos de acomodação
  typeProduct   Json   // Array de tipos de produto
  obstetrics    Json   // Array de opções obstétricas
  value         Int    @db.TinyInt // Porcentagem de 1 a 100
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt
  deletedAt     DateTime?

  campaign Campaign @relation(fields: [campaignId], references: [id])

  @@map("rules")
}
